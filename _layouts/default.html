<!DOCTYPE html>
<html lang="en-us">

  {% include head.html %}

  <body>

    <!-- Sidebar removed -->

    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
      <div class="wrap">
      <!-- Masthead removed - using bottom nav instead -->
        

      <div class="container content">
        {{ content }}
      </div>
    </div>

    <!-- Bottom Navigation Bar -->
    <nav class="bottom-nav">
      <ul class="bottom-nav-links">
        <li><a href="{{ site.baseurl }}/">~/home</a></li>
        <li><a href="{{ site.baseurl }}/posts">~/posts</a></li>
        <li><a href="{{ site.baseurl }}/life">~/gallery</a></li>
      </ul>
      <button class="theme-toggle" id="bottom-theme-toggle" aria-label="Toggle dark mode">dark</button>
    </nav>

    <!-- Your existing JavaScript -->
    <script src='{{ site.baseurl }}/public/js/script.js'></script>
    
    <!-- Gallery functionality is in gallery-scripts.html include -->

    <!-- JavaScript for Dark Mode Toggle (Bottom Nav) -->
    <script>
      document.addEventListener('DOMContentLoaded', (event) => {
        const themeToggle = document.getElementById('bottom-theme-toggle');
      
        // Function to update Utterances theme
        function updateUtterancesTheme(theme) {
          const utterancesFrame = document.querySelector('.utterances-frame');
          if (utterancesFrame) {
            const message = {
              type: 'set-theme',
              theme: theme
            };
            utterancesFrame.contentWindow.postMessage(message, 'https://utteranc.es');
          }
        }
      
        // Initialize based on localStorage
        const currentTheme = localStorage.getItem('theme');
        if (currentTheme === 'dark') {
          document.documentElement.setAttribute('data-theme', 'dark');
          themeToggle.textContent = 'light';  // Show opposite (what it will switch TO)
          updateUtterancesTheme('github-dark');
        } else {
          themeToggle.textContent = 'dark';   // Show opposite (what it will switch TO)
          updateUtterancesTheme('github-light');
        }
      
        // Toggle theme on button click
        themeToggle.addEventListener('click', function () {
          const currentTheme = document.documentElement.getAttribute('data-theme');
          
          if (currentTheme === 'dark') {
            document.documentElement.setAttribute('data-theme', 'light');
            localStorage.setItem('theme', 'light');
            themeToggle.textContent = 'dark';   // Show what it will switch TO next
            updateUtterancesTheme('github-light');
          } else {
            document.documentElement.setAttribute('data-theme', 'dark');
            localStorage.setItem('theme', 'dark');
            themeToggle.textContent = 'light';  // Show what it will switch TO next
            updateUtterancesTheme('github-dark');
          }
        });
      });
    </script>
    
  </body>
</html>
